{
  "id": "bbec9fc0-01e9-4e96-b738-25c8b1e48411",
  "name": "Analyseur d'\u00c9missions CO\u2082 AWS",
  "description": "Agent permettant d'analyser un fichier CSV d'\u00e9missions CO\u2082 d'AWS et de g\u00e9n\u00e9rer une synth\u00e8se d\u00e9taill\u00e9e avec recommandations",
  "long_description": null,
  "icon": "fa fa-leaf",
  "category": "data_processing",
  "status": "active",
  "metadata": {
    "created_at": "2026-01-19 14:47:37.043089",
    "updated_at": "2026-01-19 14:48:15.106439",
    "created_by": null,
    "version": "1.0.0",
    "tags": [
      "co2",
      "aws",
      "analyse",
      "rapport",
      "recommandations",
      "environnement"
    ]
  },
  "tools": [
    {
      "id": "6c68ffbb-1eb1-4419-8e1e-124c61c568c3",
      "tool_id": "file-upload",
      "tool_name": "T\u00e9l\u00e9versement de fichier",
      "enabled": true,
      "parameters": [
        {
          "name": "file",
          "source": "input",
          "value": null,
          "input_component": "co2_file_upload",
          "transform": null
        }
      ],
      "output_variable": "uploaded_file",
      "output_transform": null,
      "on_error": "continue",
      "retry_count": 0,
      "fallback_value": null
    },
    {
      "id": "0f40d8aa-50ef-4e6d-9a42-2484c5c8b051",
      "tool_id": "document-extractor",
      "tool_name": "Extraction de donn\u00e9es CSV",
      "enabled": true,
      "parameters": [
        {
          "name": "file_path",
          "source": "previous_output",
          "value": "uploaded_file.file_path",
          "input_component": null,
          "transform": null
        }
      ],
      "output_variable": "file_content",
      "output_transform": null,
      "on_error": "continue",
      "retry_count": 0,
      "fallback_value": null
    }
  ],
  "ui_layout": {
    "show_header": true,
    "header_title": "Analyseur d'\u00c9missions CO\u2082 AWS",
    "header_subtitle": null,
    "header_icon": null,
    "sections": [
      {
        "id": "4993fa3a-cc9b-4e07-b044-602419c1e9b2",
        "name": "upload_section",
        "title": "T\u00e9l\u00e9versement du fichier",
        "description": null,
        "layout_type": "column",
        "grid_columns": null,
        "gap": "16px",
        "components": [
          {
            "id": "42c3774c-0b6c-4ba3-a082-3234cfe9c96e",
            "type": "document_upload",
            "name": "co2_file_upload",
            "label": "T\u00e9l\u00e9versez votre fichier CSV d'\u00e9missions CO\u2082 AWS",
            "placeholder": null,
            "help_text": "Format attendu: CSV avec colonnes pour service AWS, r\u00e9gion, p\u00e9riode, \u00e9missions CO\u2082 (en kg ou tonnes)",
            "default_value": null,
            "required": true,
            "validation_rules": [],
            "options": [],
            "accept": ".csv",
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          },
          {
            "id": "47b8877d-fe77-444b-8708-d18f85ecda54",
            "type": "textarea",
            "name": "additional_info",
            "label": "Informations compl\u00e9mentaires (optionnel)",
            "placeholder": "Ex: Objectifs de r\u00e9duction, contraintes sp\u00e9cifiques, services AWS critiques...",
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          }
        ],
        "visible_when": null,
        "style": {
          "width": null,
          "height": null,
          "margin": null,
          "padding": null,
          "background_color": null,
          "text_color": null,
          "border_radius": null,
          "custom_css": null
        }
      },
      {
        "id": "e5d57931-1ffd-48d4-8cc9-483cc58eba3b",
        "name": "parameters_section",
        "title": "Param\u00e8tres d'analyse",
        "description": null,
        "layout_type": "grid",
        "grid_columns": null,
        "gap": "16px",
        "components": [
          {
            "id": "e1f542af-0fca-4721-9492-9de6da6b2d80",
            "type": "text_input",
            "name": "period",
            "label": "P\u00e9riode couverte (ex: Q1 2024, 2023-2024)",
            "placeholder": null,
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          },
          {
            "id": "ae814b37-140a-492d-8da1-86a30bdf34c8",
            "type": "multi_select",
            "name": "services",
            "label": "Services AWS principaux",
            "placeholder": null,
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [
              {
                "value": "ec2",
                "label": "Amazon EC2",
                "disabled": false,
                "icon": null
              },
              {
                "value": "s3",
                "label": "Amazon S3",
                "disabled": false,
                "icon": null
              },
              {
                "value": "rds",
                "label": "Amazon RDS",
                "disabled": false,
                "icon": null
              },
              {
                "value": "lambda",
                "label": "AWS Lambda",
                "disabled": false,
                "icon": null
              },
              {
                "value": "eks",
                "label": "Amazon EKS",
                "disabled": false,
                "icon": null
              },
              {
                "value": "dynamodb",
                "label": "Amazon DynamoDB",
                "disabled": false,
                "icon": null
              },
              {
                "value": "cloudfront",
                "label": "Amazon CloudFront",
                "disabled": false,
                "icon": null
              }
            ],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          },
          {
            "id": "6df0910a-33f8-4d5d-99ac-d10e2e5b78e9",
            "type": "multi_select",
            "name": "regions",
            "label": "R\u00e9gions AWS concern\u00e9es",
            "placeholder": null,
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [
              {
                "value": "us-east-1",
                "label": "US East (N. Virginia)",
                "disabled": false,
                "icon": null
              },
              {
                "value": "us-west-2",
                "label": "US West (Oregon)",
                "disabled": false,
                "icon": null
              },
              {
                "value": "eu-west-1",
                "label": "Europe (Irlande)",
                "disabled": false,
                "icon": null
              },
              {
                "value": "eu-central-1",
                "label": "Europe (Francfort)",
                "disabled": false,
                "icon": null
              },
              {
                "value": "ap-southeast-1",
                "label": "Asie-Pacifique (Singapour)",
                "disabled": false,
                "icon": null
              }
            ],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          },
          {
            "id": "709fa8c9-cfc1-42cc-bfb3-1cd25ae09863",
            "type": "text_input",
            "name": "reduction_goals",
            "label": "Objectifs de r\u00e9duction (optionnel)",
            "placeholder": "Ex: R\u00e9duire de 20% d'ici 2025",
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          }
        ],
        "visible_when": null,
        "style": {
          "width": null,
          "height": null,
          "margin": null,
          "padding": null,
          "background_color": null,
          "text_color": null,
          "border_radius": null,
          "custom_css": null
        }
      },
      {
        "id": "48465a33-6126-4f67-95e2-e8e9ac1051d0",
        "name": "results_section",
        "title": "R\u00e9sultats de l'analyse",
        "description": null,
        "layout_type": "column",
        "grid_columns": null,
        "gap": "16px",
        "components": [
          {
            "id": "806d338c-3f68-4bf5-bc67-e70c296a56ae",
            "type": "markdown_viewer",
            "name": "analysis_results",
            "label": "Synth\u00e8se et recommandations",
            "placeholder": null,
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          },
          {
            "id": "e9896427-15fe-4db5-870e-fae6a3b41e7e",
            "type": "button",
            "name": "export_report",
            "label": "Exporter le rapport (PDF)",
            "placeholder": null,
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          }
        ],
        "visible_when": null,
        "style": {
          "width": null,
          "height": null,
          "margin": null,
          "padding": null,
          "background_color": null,
          "text_color": null,
          "border_radius": null,
          "custom_css": null
        }
      },
      {
        "id": "8b05e125-bdcf-405a-aa72-a974fb162870",
        "name": "chat_section",
        "title": "Discussion",
        "description": null,
        "layout_type": "column",
        "grid_columns": null,
        "gap": "16px",
        "components": [
          {
            "id": "6292d393-4436-4353-bcc2-744a50b533fe",
            "type": "chat_interface",
            "name": "analysis_chat",
            "label": "Posez des questions sur l'analyse",
            "placeholder": null,
            "help_text": null,
            "default_value": null,
            "required": false,
            "validation_rules": [],
            "options": [],
            "accept": null,
            "max_size_mb": null,
            "multiple": false,
            "grid_column": null,
            "grid_row": null,
            "order": 0,
            "style": {
              "width": null,
              "height": null,
              "margin": null,
              "padding": null,
              "background_color": null,
              "text_color": null,
              "border_radius": null,
              "custom_css": null
            },
            "visible_when": null,
            "children": [],
            "data_source": null,
            "auto_bind_output": false,
            "on_change_action": null,
            "button_action": null,
            "button_variant": null,
            "is_trigger_button": false
          }
        ],
        "visible_when": null,
        "style": {
          "width": null,
          "height": null,
          "margin": null,
          "padding": null,
          "background_color": null,
          "text_color": null,
          "border_radius": null,
          "custom_css": null
        }
      }
    ],
    "show_sidebar": false,
    "sidebar_sections": [],
    "sidebar_position": "left",
    "sidebar_width": "300px",
    "show_footer": false,
    "footer_content": null,
    "show_actions": true,
    "actions": [],
    "primary_color": null,
    "secondary_color": null,
    "custom_css": null
  },
  "ai_behavior": {
    "system_prompt": "Tu es un expert en analyse environnementale et en optimisation des \u00e9missions CO\u2082 pour les infrastructures cloud AWS.\nTa mission est d'analyser les donn\u00e9es d'\u00e9missions CO\u2082 fournies par l'utilisateur dans un fichier CSV, puis de:\n1. Fournir une synth\u00e8se d\u00e9taill\u00e9e des \u00e9missions par service AWS, r\u00e9gion, et p\u00e9riode\n2. Identifier les principaux contributeurs aux \u00e9missions\n3. Comparer les \u00e9missions avec les benchmarks du secteur si possible\n4. Proposer des recommandations concr\u00e8tes pour r\u00e9duire l'empreinte carbone\n5. Mettre en \u00e9vidence les tendances et anomalies\n\nStructure ta r\u00e9ponse en sections claires:\n- R\u00e9sum\u00e9 ex\u00e9cutif\n- Analyse d\u00e9taill\u00e9e (par service, r\u00e9gion, p\u00e9riode)\n- Recommandations prioritaires\n- Recommandations secondaires\n- Annexes (m\u00e9thodologie, sources)\n\nSois pr\u00e9cis dans tes analyses et fournis des chiffres cl\u00e9s. Pour les recommandations, indique le potentiel de r\u00e9duction estim\u00e9 et l'effort de mise en \u0153uvre.\n",
    "user_prompt": "Voici un fichier CSV contenant des donn\u00e9es d'\u00e9missions CO\u2082 AWS: {file_content}\n\nAnalyse ces donn\u00e9es et produis:\n1. Une synth\u00e8se d\u00e9taill\u00e9e des \u00e9missions\n2. Des recommandations pour r\u00e9duire l'empreinte carbone\n\nVoici des informations compl\u00e9mentaires qui pourraient t'aider:\n- P\u00e9riode couverte: {period}\n- Services AWS principaux utilis\u00e9s: {services}\n- R\u00e9gions AWS concern\u00e9es: {regions}\n- Objectifs de r\u00e9duction (si connus): {reduction_goals}\n",
    "personality_traits": [],
    "tone": "professional",
    "default_provider": "mistral",
    "default_model": "mistral-large-latest",
    "temperature": 0.3,
    "max_tokens": 4096,
    "response_format": null,
    "include_sources": false,
    "include_confidence": false,
    "context_window": 10,
    "include_system_context": true,
    "enable_moderation": true,
    "enable_classification": true,
    "content_filters": [],
    "task_prompts": {}
  },
  "workflows": [
    {
      "id": "8d55fcd1-4177-4817-af86-752be2f8a3d4",
      "name": "analyse_emissions_co2",
      "description": null,
      "trigger": "form_submit",
      "trigger_config": {},
      "steps": [
        {
          "id": "validate_input",
          "name": "Validation du fichier",
          "type": "condition",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": {
            "variable": "co2_file_upload",
            "operator": "is_not_empty",
            "value": ""
          },
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": null
        },
        {
          "id": "error_no_file",
          "name": "Erreur: fichier manquant",
          "type": "set_variable",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "analysis_results"
        },
        {
          "id": "extract_data",
          "name": "Extraction des donn\u00e9es",
          "type": "tool_call",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "file_content"
        },
        {
          "id": "validate_content",
          "name": "Validation du contenu",
          "type": "condition",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": {
            "variable": "file_content",
            "operator": "is_not_empty",
            "value": ""
          },
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": null
        },
        {
          "id": "error_invalid_file",
          "name": "Erreur: fichier invalide",
          "type": "set_variable",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "analysis_results"
        },
        {
          "id": "prepare_analysis",
          "name": "Pr\u00e9paration de l'analyse",
          "type": "set_variable",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "user_context"
        },
        {
          "id": "generate_analysis",
          "name": "G\u00e9n\u00e9ration de l'analyse",
          "type": "llm_call",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "analysis_results"
        },
        {
          "id": "display_results",
          "name": "Affichage des r\u00e9sultats",
          "type": "set_variable",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "analysis_results_display"
        }
      ],
      "entry_step": "validate_input",
      "variables": {},
      "global_error_handler": null
    },
    {
      "id": "1060a2dd-bcee-4d21-bdc3-9a178e227539",
      "name": "export_report",
      "description": null,
      "trigger": "button_click",
      "trigger_config": {},
      "steps": [
        {
          "id": "prepare_export",
          "name": "Pr\u00e9paration du rapport",
          "type": "set_variable",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "report_content"
        },
        {
          "id": "generate_pdf",
          "name": "G\u00e9n\u00e9ration du PDF",
          "type": "tool_call",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "pdf_report"
        },
        {
          "id": "provide_download",
          "name": "Fournir le t\u00e9l\u00e9chargement",
          "type": "set_variable",
          "description": null,
          "prompt_template": null,
          "system_prompt": null,
          "llm_provider": null,
          "temperature": null,
          "max_tokens": null,
          "tool_config_id": null,
          "condition": null,
          "on_true": null,
          "on_false": null,
          "loop_variable": null,
          "loop_collection": null,
          "loop_body": [],
          "parallel_steps": [],
          "input_components": [],
          "next_step": null,
          "output_variable": "download_link"
        }
      ],
      "entry_step": "prepare_export",
      "variables": {},
      "global_error_handler": null
    }
  ],
  "route": "/custom-agent/analyseur-dmissions-co-aws-bbec9fc0",
  "requires_auth": false,
  "allowed_roles": []
}